<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 14.0.1~dev.20251003.1243 (20251003.1243)
 -->
<!-- Title: MoshiTTSStream Pages: 1 -->
<svg width="905pt" height="98pt"
 viewBox="0.00 0.00 905.00 98.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 94)">
<title>MoshiTTSStream</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-94 901.11,-94 901.11,4 -4,4"/>
<!-- text -->
<g id="node1" class="node">
<title>text</title>
<polygon fill="none" stroke="black" points="112.4,-90 0,-90 0,-54 112.4,-54 112.4,-90"/>
<text xml:space="preserve" text-anchor="middle" x="56.2" y="-74.8" font-family="Times,serif" font-size="14.00">Text chunks</text>
<text xml:space="preserve" text-anchor="middle" x="56.2" y="-60.8" font-family="Times,serif" font-size="14.00">(sentence/length)</text>
</g>
<!-- prep -->
<g id="node2" class="node">
<title>prep</title>
<polygon fill="none" stroke="black" points="273.86,-90 149.4,-90 149.4,-54 273.86,-54 273.86,-90"/>
<text xml:space="preserve" text-anchor="middle" x="211.63" y="-67.8" font-family="Times,serif" font-size="14.00">TTS prepare_script</text>
</g>
<!-- text&#45;&gt;prep -->
<g id="edge1" class="edge">
<title>text&#45;&gt;prep</title>
<path fill="none" stroke="black" d="M112.59,-72C120.74,-72 129.23,-72 137.66,-72"/>
<polygon fill="black" stroke="black" points="137.57,-75.5 147.57,-72 137.57,-68.5 137.57,-75.5"/>
</g>
<!-- cond -->
<g id="node3" class="node">
<title>cond</title>
<polygon fill="none" stroke="black" points="432.75,-90 310.86,-90 310.86,-54 432.75,-54 432.75,-90"/>
<text xml:space="preserve" text-anchor="middle" x="371.81" y="-74.8" font-family="Times,serif" font-size="14.00">Voice conditioning</text>
<text xml:space="preserve" text-anchor="middle" x="371.81" y="-60.8" font-family="Times,serif" font-size="14.00">(.safetensors)</text>
</g>
<!-- prep&#45;&gt;cond -->
<g id="edge2" class="edge">
<title>prep&#45;&gt;cond</title>
<path fill="none" stroke="black" d="M274.24,-72C282.41,-72 290.84,-72 299.16,-72"/>
<polygon fill="black" stroke="black" points="298.89,-75.5 308.89,-72 298.89,-68.5 298.89,-75.5"/>
</g>
<!-- gen -->
<g id="node4" class="node">
<title>gen</title>
<polygon fill="none" stroke="black" points="561.55,-90 469.75,-90 469.75,-54 561.55,-54 561.55,-90"/>
<text xml:space="preserve" text-anchor="middle" x="515.65" y="-74.8" font-family="Times,serif" font-size="14.00">TTS generate</text>
<text xml:space="preserve" text-anchor="middle" x="515.65" y="-60.8" font-family="Times,serif" font-size="14.00">(on_frame)</text>
</g>
<!-- cond&#45;&gt;gen -->
<g id="edge3" class="edge">
<title>cond&#45;&gt;gen</title>
<path fill="none" stroke="black" d="M432.96,-72C441.28,-72 449.79,-72 458.04,-72"/>
<polygon fill="black" stroke="black" points="457.96,-75.5 467.96,-72 457.96,-68.5 457.96,-75.5"/>
</g>
<!-- decode -->
<g id="node5" class="node">
<title>decode</title>
<polygon fill="none" stroke="black" points="718.36,-90 598.55,-90 598.55,-54 718.36,-54 718.36,-90"/>
<text xml:space="preserve" text-anchor="middle" x="658.46" y="-74.8" font-family="Times,serif" font-size="14.00">Mimi decode_step</text>
<text xml:space="preserve" text-anchor="middle" x="658.46" y="-60.8" font-family="Times,serif" font-size="14.00">PCM frames</text>
</g>
<!-- gen&#45;&gt;decode -->
<g id="edge4" class="edge">
<title>gen&#45;&gt;decode</title>
<path fill="none" stroke="black" d="M561.98,-72C569.88,-72 578.27,-72 586.67,-72"/>
<polygon fill="black" stroke="black" points="586.56,-75.5 596.56,-72 586.56,-68.5 586.56,-75.5"/>
</g>
<!-- out -->
<g id="node6" class="node">
<title>out</title>
<polygon fill="none" stroke="black" points="897.11,-50 802.57,-50 802.57,-14 897.11,-14 897.11,-50"/>
<text xml:space="preserve" text-anchor="middle" x="849.84" y="-34.8" font-family="Times,serif" font-size="14.00">OutputStream</text>
<text xml:space="preserve" text-anchor="middle" x="849.84" y="-20.8" font-family="Times,serif" font-size="14.00">speaker</text>
</g>
<!-- decode&#45;&gt;out -->
<g id="edge5" class="edge">
<title>decode&#45;&gt;out</title>
<path fill="none" stroke="black" d="M718.86,-59.45C741.98,-54.57 768.37,-49 791.31,-44.15"/>
<polygon fill="black" stroke="black" points="791.72,-47.64 800.78,-42.15 790.27,-40.79 791.72,-47.64"/>
</g>
<!-- barge -->
<g id="node7" class="node">
<title>barge</title>
<polygon fill="none" stroke="black" points="694.06,-36 622.85,-36 622.85,0 694.06,0 694.06,-36"/>
<text xml:space="preserve" text-anchor="middle" x="658.46" y="-20.8" font-family="Times,serif" font-size="14.00">Barge&#45;in</text>
<text xml:space="preserve" text-anchor="middle" x="658.46" y="-6.8" font-family="Times,serif" font-size="14.00">(optional)</text>
</g>
<!-- barge&#45;&gt;out -->
<g id="edge6" class="edge">
<title>barge&#45;&gt;out</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M694.19,-20.57C721.2,-22.56 759.27,-25.38 790.87,-27.71"/>
<polygon fill="black" stroke="black" points="790.45,-31.19 800.69,-28.44 790.97,-24.21 790.45,-31.19"/>
<text xml:space="preserve" text-anchor="middle" x="760.47" y="-29.87" font-family="Times,serif" font-size="14.00">interrupt</text>
</g>
</g>
</svg>
